# üéØ playwright-mcp-poc

[![workflow](https://img.shields.io/github/actions/workflow/status/Code-Gabs/playwright-mcp-poc/playwright.yml?branch=main&style=flat-square)](https://github.com/Code-Gabs/playwright-mcp-poc/actions)
[![Playwright test runner](https://img.shields.io/badge/playwright-%40playwright%2Ftest-8257e5?style=flat-square&logo=playwright)](https://playwright.dev/)
[![License: MIT](https://img.shields.io/badge/license-MIT-green?style=flat-square)](#)

Minimal, focused Playwright test project (POC) that validates APIary documentation pages. Designed to be simple to run locally and to produce actionable artifacts (HTML report + screenshots) in CI.

---

## üöÄ Quick links

- Tests: `tests/`
- Playwright config: `playwright.config.ts`
- CI workflow: `.github/workflows/playwright.yml`
- Report screenshots: `screenshots/` (excluded from git)

---

## ‚ú® Features

- Playwright tests written with `@playwright/test`.
- Headed local tests (easy visual debugging).
- Screenshot capture & attachment to Playwright report for failing or evidence runs.
- GitHub Actions workflow that runs tests and uploads `playwright-report`, `screenshots/`, and `test-results/` on failure.

---

## üì¶ Prerequisites

- Node.js (v16+ recommended)
- Git
- (Optional) Git Bash on Windows for a bash-like shell experience

---

## üß≠ Local setup (Windows)

Use `cmd.exe` or Git Bash to avoid PowerShell script execution policy issues. Example commands below are shown for PowerShell/cmd but will work in Git Bash too.

1) Install project deps

```bash
npm install
```

2) Install browser binaries (Chromium only ‚Äî smaller & faster)

```bash
npx playwright install --with-deps chromium
```

3) Run full test suite

```bash
# headless (default in CI)
npm test

# headed (see the browser)
npx playwright test --project=chromium --headed
```

4) Run a single test file

```bash
npx playwright test tests/apiary.usuarios.criarusario.chrome.spec.ts --project=chromium --headed
```

5) View the HTML report generated by the reporter

```bash
npx playwright show-report
```

---

## üõ†Ô∏è PowerShell gotcha

If PowerShell blocks `npm`/`npx` with an execution policy error, either run commands in `cmd.exe`/Git Bash or relax the policy for your user (requires consent):

```powershell
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

---

## ‚úÖ Best practices for tests in this repo

- Prefer `getByRole` + accessible names instead of brittle CSS selectors. Example:

```ts
await expect(page.getByRole('heading', { name: /Usu√°rios/i })).toBeVisible();
```

- Keep tests idempotent: tests should not rely on or modify external state.
- Capture screenshots and attach them to reports for quick debugging (this repo already saves screenshots and attaches them via `test.info().attach`).

---

## üß© CI (GitHub Actions)

- Workflow: `.github/workflows/playwright.yml` ‚Äî it installs dependencies, installs browsers, runs `npm test` and uploads artifacts (report/screenshots/test-results) when the run fails.
- Artifacts retention: 7 days (changeable in the workflow).

---

## üìù Contributing

- Add tests in the `tests/` folder following the existing style (headed-friendly, using `getByRole`).
- Keep changes small and focused; add/adjust tests with a matching commit message like `test(apiary): add criar-usuario doc test`.

---

## üìû Need help?

- I can:
  - Add more strict assertions for examples and code blocks;
  - Configure CI caching for npm and Playwright browsers;
  - Switch to the system Chrome channel (update `playwright.config.ts` with `use: { channel: 'chrome' }`).

If you'd like, I can also add badges, GIF demos, or a CONTRIBUTING.md with a template for test PRs.

---

_Made with ‚ù§Ô∏è for a Playwright POC_
# playwright-mcp-poc

This is a Minimal Playwright test project make with playwright-mcp, focused on validating APIary documentation pages.
This is a study project to my POC

Quick start ‚Äî Local (Windows)

1. Install dev dependency

```powershell
# Recommended: run these in cmd.exe or Git Bash to avoid PowerShell execution policy issues
npm install
```

2. Install Chromium (smaller, faster than installing all browsers)

```powershell
npx playwright install --with-deps chromium
```

3. Run full test suite (headless by default in CI; use `--headed` to see the browser)

```powershell
# run in cmd.exe or Git Bash
npm test
# or to run headed locally:
npx playwright test --project=chromium --headed
```

4. Run a single test file

```powershell
npx playwright test tests/apiary.usuarios.criarusario.chrome.spec.ts --project=chromium --headed
```

5. View HTML report (after a run)

```powershell
npx playwright show-report
```

PowerShell notes

- PowerShell's script execution policy can block `npm`/`npx` PowerShell helper scripts. If you see an error like "execution of scripts is disabled on this system", either:
  - Use `cmd.exe` or Git Bash to run the npm/npx commands, or
  - Change the execution policy (requires admin):

```powershell
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

CI notes

- The included GitHub Actions workflow (`.github/workflows/playwright.yml`) runs tests and will upload Playwright artifacts on failure (HTML report, screenshots and `test-results/`).
- For reproducible CI installs prefer committing `package-lock.json`; this repo currently excludes the lockfile. If you want deterministic CI installs, remove `package-lock.json` from `.gitignore` and commit it.

Adding tests

- Tests use `@playwright/test`. Prefer `getByRole` queries and readable names (e.g. `getByRole('heading', { name: /Usu√°rios/i })`) to avoid brittle selectors.
- Tests added in `tests/` follow a headed/local-friendly pattern and attach screenshots for failing evidence.

Contact

If you want me to:
- Add more specific assertions or stricter checks, tell me which visible strings/code blocks to expect;
- Configure CI to run on a specific Node version or to cache browser artifacts;
- Switch to using the `chrome` channel (system Chrome) instead of bundled Chromium ‚Äî I can update `playwright.config.ts`.

